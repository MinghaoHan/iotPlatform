由于arduino没有网卡，故使用串口与电脑端通信，由电脑端做转发，将arduino读到的传感器（DHT11）数据通过MQTT协议发送到MQTT服务器，与edgex端通信，edgex端做逻辑判断将结果数据以及从Atlas200读到的数据通过MQTT协议返回给电脑端，电脑端将数据写到串口，arduino根据读到的串口数据控制LED或蜂鸣器。

电脑端使用python的pyserial模块读写与arduino相连的的串口数据，使用paho模块中的MQTT客户端与edgex端通信。使用多线程，起两个线程分别负责读写串口数据即与arduino通信，以及发布、订阅MQTT相关topic与edgex通信。

Arduino端以第二次作业的FreeRTOS为基础，启用三个任务，分别负责读取DHT11温度数据、串口通信、控制LED灯与蜂鸣器，各任务间用一个内容为byte型数据的queue通信。传感器任务将读到的温度数据以字节形式发送到queue，串口通信任务接收queue中的温度数据，写到串口上供电脑端读取，写入后如果串口有可读数据，即如果电脑端发来了结果数据（发来的会是成对的数据，分别为人脸识别结果和高温警报结果），读取这些数据，发送到queue，控制LED与蜂鸣器的任务接收queue中的一对数据，分别作出判断，是否亮灯以及是否响蜂鸣器。

考虑到Arduino内存只有2K，任何多余的变量都可能使其爆内存，故整个实验都尽可能少用变量，所以使用一个整形变量二进制中的不同位数来判断是否亮灯以及响鸣。电脑端在将人脸检测结果写入串口前加5，即范围由[-1, 1]变为[5, 6]。

数据样例：

| 值          | 解释               | 对应操作               | 对应位数 | 变量值（二进制） |
| ----------- | ------------------ | ---------------------- | -------- | ---------------- |
| 4（原为-1） | 检测到未知人脸     | LED灯闪烁              | 2        | xx01             |
| 5（原为0）  | 未检测到人脸       | LED灯关闭              | 1、2     | xx00             |
| 6（原为1）  | 检测到已知人脸     | LED灯常亮              | 1        | xx10             |
| 0           | 温度未超出所设阈值 | 蜂鸣器关闭             | 3        | x0xx             |
| 1           | 温度超出所设阈值   | 高温警报，蜂鸣器滴滴响 | 3        | x1xx             |



